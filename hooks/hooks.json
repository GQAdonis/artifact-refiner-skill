{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate-manifest.sh 2>&1 || true"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "pmpo-specifier",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/state-checkpoint.sh \"${ARTIFACT_NAME:-unnamed}\" specify 2>&1 || true"
          }
        ]
      },
      {
        "matcher": "pmpo-planner",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/state-checkpoint.sh \"${ARTIFACT_NAME:-unnamed}\" plan 2>&1 || true"
          }
        ]
      },
      {
        "matcher": "pmpo-executor",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/post-execute-check.sh 2>&1 || true"
          },
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/state-checkpoint.sh \"${ARTIFACT_NAME:-unnamed}\" execute 2>&1 || true"
          },
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/workflow-dispatch.sh \"${ARTIFACT_NAME:-unnamed}\" on_phase_complete execute 2>&1 || true"
          }
        ]
      },
      {
        "matcher": "pmpo-reflector",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/log-reflection.sh 2>&1 || true"
          },
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/state-checkpoint.sh \"${ARTIFACT_NAME:-unnamed}\" reflect 2>&1 || true"
          },
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/workflow-dispatch.sh \"${ARTIFACT_NAME:-unnamed}\" on_phase_complete reflect 2>&1 || true"
          }
        ]
      },
      {
        "matcher": "artifact-validator",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/state-checkpoint.sh \"${ARTIFACT_NAME:-unnamed}\" persist 2>&1 || true"
          },
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/workflow-dispatch.sh \"${ARTIFACT_NAME:-unnamed}\" on_iteration_complete persist 2>&1 || true"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/state-finalize.sh \"${ARTIFACT_NAME:-unnamed}\" 2>&1 || true"
          },
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/workflow-dispatch.sh \"${ARTIFACT_NAME:-unnamed}\" on_refinement_complete 2>&1 || true"
          },
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/finalize-session.sh 2>&1 || true"
          }
        ]
      }
    ]
  }
}
